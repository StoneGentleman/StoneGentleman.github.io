<!DOCTYPE-html>
<html-lang="en">
 <head>
 <script>
  bigBang = new Date();
</script>
 <meta-charset="UTF-8">
 <meta-name="viewport"-content="width=device-width,-initial-scale=1.0">
 <title>my-Home-page</title>
 <style>
 *{
   border:5px-solid-blue;
   
   margin: 0;
   padding: 0;
   text-align: center;
   box-sizing: border-box;
  }
  p{
    border: 1px solid blue;
  }
  header{
    height:25%;
    background-color:aquamarine;

  }
  body{
    height: 99vh;
    font-size:calc(0.5em+2vw) ;
  }
  nav{
    height:5% ;
    font-size: 1.2em;
  }
  main{
    height:60%;
    font-size: 2em;
    background-color:bisque;
  }
  footer{
    
    height:10%;
    background-color: brown;
    color:white;
  }
  button{
    padding: 0.1em;
    font-size: 1em;
  }
 </style>
<script>
  let Model = {} ;
  Model.cet6String = '' ;
  Model.CET6 = [] ;
  Model.cetUrl = ['cet6.txt'];
  for(let i=0; i<Model.cetUrl.length; i++){
      fetch(Model.cetUrl[i])
      .then(res => res.text())
      .then(txt => {
          Model.cet6String += txt ;
          UI.log('单词库：' + Model.cetUrl[i] + ' 加载成功!') ;       
      });
    } ;

</script>
 <script>
  /*console.log("加载CSS代码:"+(new Date() - bigBang) + 'ms');*/
  
</script>
</head>
<body style="height:717px">
 <header>
cet6
 </header>
 <nav>
  <button id="randWord">随机单词</button>
  <button  id="loadWord">读入单词</button>
 </nav>
  <main>
  <p id="word">abandon</p>
  <p id="pron">/ə'bændən/</p>
  <p id="chinese">vt.离弃,丢弃;遗弃,抛弃;放弃</p>
 </main>
 <footer>
 20223491张益泽
 </footer>
 <script>
 
  /* let myBody = document.querySelector('body');
       myBody.style.height = innerHeight - 15 + 'px' ;
      console.timeEnd('bigBang') ;
       myBody.querySelector('header').textContent = "页面渲染时间：" + ( new Date() - timerBegin ) + 'ms';
 
       console.time('xmb') ;
       timerBegin = new Date() ;
       let i= 1 ;
       while (  i < 2**32 / 40 ){
          i ++ ; 
         }
       console.timeEnd('xmb') ;*/
 
  /*  let strCET6 = '' ;
       let arrCET6 = [] ;
   fetch('https://stonegentleman.github.io/cet6.txt')
   .then(res => res.text())
   .then(txt => {
                 strCET6 = txt ;
                 arrCET6 =  strCET6.split('\r\n') ;
                 let rand = Math.floor(arrCET6.length * Math.random() ) ;
                 let cetWord = arrCET6[rand] ;
                 let begin = cetWord.indexOf('\t') ;
                 let end =  cetWord.lastIndexOf('\t') ;
                 let word = cetWord.slice(0,begin) ;
                 let pron = cetWord.slice(begin+1,end) ;
                 let chinese = cetWord.slice(end+1) ;
                    select('#word').textContent = word ;
                    select('#pron').textContent = pron ;
                    select('#chinese').textContent =chinese ;
                }) ;
   function select(str){
    let dom = document.querySelector(str);
    return dom ;
   }
  
 </script>
  <script>
    let UI = {} ;
    let loadCet = select('button#loadWord');
    let randWord= select('button#randWord');
     UI.log = function(s){
     select('footer').textContent = s ;
     } ;
     UI.headerLog = function(s){
     select('header').textContent = s ;
     } ;  
    
     select('button#loadWord').onclick = function(){
       Model.CET6 = Model.cet6String.split('\r\n') ;

       if(Model.CET6.length < 5000){
           UI.log("单词没有完全读入，Please wait!");
       }else{
           UI.log("我已经读入了"+ Model.CET6.length + "单词!")
       }
       
     } ;
     select('button#randWord').onclick = function(){
               
       if(Model.CET6.length < 5000){
           UI.log("请点“读入单词”按钮");
       }else{
           let rand = Math.floor(Math.random() * Model.CET6.length) ;
         
           UI.log("我已经读入了"+ Model.CET6.length + "单词!")
           
     
        let str=Model.CET6[rand];
       
        let begin=str.indexOf('\t');
        let end=str.lastIndexOf('\t');
        console.log('b:'+begin+'e:'+end);
        let en=str.slice(0,begin);
        let pr=str.slice(begin+1,end);
        let cn=str.slice(end+1);
        select('p#word').textContent=en;
        select('p#pron').textContent=pr;
        select('p#chinese').textContent=cn;
       }
       
     } ;
    function select(selector){
       let dom = document.querySelector(selector) ;
       return dom ;
     }
   </script>
 </body>
</html>

